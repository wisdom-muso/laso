# Generated by Django 5.1.7 on 2025-12-08 17:48

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('appointments', '0005_appointment_is_telemedicine_and_more'),
        ('core', '0009_securityauditlog'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Room',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('room_number', models.CharField(max_length=20, verbose_name='Room Number')),
                ('room_type', models.CharField(choices=[('private', 'Private Room'), ('semi_private', 'Semi-Private (2 beds)'), ('general', 'General Ward (4+ beds)'), ('isolation', 'Isolation Room'), ('icu', 'ICU Room'), ('emergency', 'Emergency Bay'), ('operating', 'Operating Room'), ('recovery', 'Recovery Room')], default='general', max_length=20, verbose_name='Room Type')),
                ('capacity', models.PositiveIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(20)], verbose_name='Bed Capacity')),
                ('has_bathroom', models.BooleanField(default=False, verbose_name='Has Bathroom')),
                ('has_tv', models.BooleanField(default=False, verbose_name='Has TV')),
                ('has_ac', models.BooleanField(default=True, verbose_name='Has Air Conditioning')),
                ('daily_rate', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Daily Rate')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
            ],
            options={
                'verbose_name': 'Room',
                'verbose_name_plural': 'Rooms',
                'ordering': ['ward', 'room_number'],
            },
        ),
        migrations.CreateModel(
            name='VisitType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Visit Type Name')),
                ('category', models.CharField(choices=[('outpatient', 'Outpatient'), ('inpatient', 'Inpatient'), ('emergency', 'Emergency'), ('day_surgery', 'Day Surgery'), ('telemedicine', 'Telemedicine')], default='outpatient', max_length=20, verbose_name='Category')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('default_duration_minutes', models.PositiveIntegerField(default=30, verbose_name='Default Duration (minutes)')),
                ('requires_admission', models.BooleanField(default=False, verbose_name='Requires Admission')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
            ],
            options={
                'verbose_name': 'Visit Type',
                'verbose_name_plural': 'Visit Types',
                'ordering': ['category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Bed',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('bed_number', models.CharField(max_length=20, verbose_name='Bed Number/Label')),
                ('bed_type', models.CharField(choices=[('standard', 'Standard Bed'), ('electric', 'Electric Adjustable'), ('icu', 'ICU Bed'), ('bariatric', 'Bariatric Bed'), ('pediatric', 'Pediatric Bed'), ('maternity', 'Maternity Bed'), ('stretcher', 'Stretcher/Gurney')], default='standard', max_length=20, verbose_name='Bed Type')),
                ('status', models.CharField(choices=[('available', 'Available'), ('occupied', 'Occupied'), ('reserved', 'Reserved'), ('maintenance', 'Under Maintenance'), ('cleaning', 'Being Cleaned')], default='available', max_length=20, verbose_name='Status')),
                ('has_oxygen', models.BooleanField(default=True, verbose_name='Has Oxygen Supply')),
                ('has_suction', models.BooleanField(default=False, verbose_name='Has Suction')),
                ('has_monitor', models.BooleanField(default=False, verbose_name='Has Patient Monitor')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('last_cleaned', models.DateTimeField(blank=True, null=True, verbose_name='Last Cleaned')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('current_patient', models.ForeignKey(blank=True, limit_choices_to={'user_type': 'patient'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_beds', to=settings.AUTH_USER_MODEL, verbose_name='Current Patient')),
                ('room', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='beds', to='core.room', verbose_name='Room')),
            ],
            options={
                'verbose_name': 'Bed',
                'verbose_name_plural': 'Beds',
                'ordering': ['room', 'bed_number'],
                'unique_together': {('room', 'bed_number')},
            },
        ),
        migrations.CreateModel(
            name='PatientAdmission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('admission_number', models.CharField(max_length=50, unique=True, verbose_name='Admission Number')),
                ('admission_type', models.CharField(choices=[('emergency', 'Emergency Admission'), ('elective', 'Elective/Planned Admission'), ('transfer', 'Transfer from Another Facility'), ('maternity', 'Maternity Admission'), ('observation', 'Observation (Short Stay)')], default='elective', max_length=20, verbose_name='Admission Type')),
                ('status', models.CharField(choices=[('admitted', 'Admitted'), ('in_treatment', 'In Treatment'), ('pending_discharge', 'Pending Discharge'), ('discharged', 'Discharged'), ('transferred', 'Transferred'), ('deceased', 'Deceased'), ('absconded', 'Left Against Medical Advice')], default='admitted', max_length=20, verbose_name='Status')),
                ('admission_date', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Admission Date & Time')),
                ('expected_discharge_date', models.DateField(blank=True, null=True, verbose_name='Expected Discharge Date')),
                ('actual_discharge_date', models.DateTimeField(blank=True, null=True, verbose_name='Actual Discharge Date & Time')),
                ('admission_diagnosis', models.TextField(verbose_name='Admission Diagnosis')),
                ('chief_complaint', models.TextField(blank=True, verbose_name='Chief Complaint')),
                ('emergency_contact_name', models.CharField(blank=True, max_length=100, verbose_name='Emergency Contact Name')),
                ('emergency_contact_phone', models.CharField(blank=True, max_length=20, verbose_name='Emergency Contact Phone')),
                ('emergency_contact_relationship', models.CharField(blank=True, max_length=50, verbose_name='Relationship to Patient')),
                ('payment_type', models.CharField(choices=[('insurance', 'Insurance'), ('self_pay', 'Self Pay'), ('government', 'Government/Public'), ('corporate', 'Corporate'), ('charity', 'Charity/Free')], default='self_pay', max_length=20, verbose_name='Payment Type')),
                ('insurance_policy_number', models.CharField(blank=True, max_length=100, verbose_name='Insurance Policy Number')),
                ('discharge_diagnosis', models.TextField(blank=True, verbose_name='Discharge Diagnosis')),
                ('discharge_summary', models.TextField(blank=True, verbose_name='Discharge Summary')),
                ('discharge_instructions', models.TextField(blank=True, verbose_name='Discharge Instructions')),
                ('follow_up_instructions', models.TextField(blank=True, verbose_name='Follow-up Instructions')),
                ('notes', models.TextField(blank=True, verbose_name='Additional Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('admitting_doctor', models.ForeignKey(limit_choices_to={'user_type': 'doctor'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='admitted_patients', to=settings.AUTH_USER_MODEL, verbose_name='Admitting Doctor')),
                ('attending_doctor', models.ForeignKey(blank=True, limit_choices_to={'user_type': 'doctor'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='attending_patients', to=settings.AUTH_USER_MODEL, verbose_name='Attending Doctor')),
                ('bed', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_admissions', to='core.bed', verbose_name='Assigned Bed')),
                ('discharged_by', models.ForeignKey(blank=True, limit_choices_to={'user_type': 'doctor'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='discharged_patients', to=settings.AUTH_USER_MODEL, verbose_name='Discharged By')),
                ('patient', models.ForeignKey(limit_choices_to={'user_type': 'patient'}, on_delete=django.db.models.deletion.CASCADE, related_name='admissions', to=settings.AUTH_USER_MODEL, verbose_name='Patient')),
            ],
            options={
                'verbose_name': 'Patient Admission',
                'verbose_name_plural': 'Patient Admissions',
                'ordering': ['-admission_date'],
            },
        ),
        migrations.CreateModel(
            name='PatientTransfer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transfer_reason', models.CharField(choices=[('bed_transfer', 'Bed/Room Transfer'), ('ward_transfer', 'Ward Transfer'), ('icu_upgrade', 'ICU Upgrade'), ('icu_downgrade', 'ICU Downgrade'), ('facility_transfer', 'External Facility Transfer'), ('patient_request', 'Patient Request'), ('medical_necessity', 'Medical Necessity')], max_length=30, verbose_name='Transfer Reason')),
                ('notes', models.TextField(blank=True, verbose_name='Transfer Notes')),
                ('transfer_date', models.DateTimeField(auto_now_add=True, verbose_name='Transfer Date & Time')),
                ('admission', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfers', to='core.patientadmission', verbose_name='Admission')),
                ('from_bed', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transfers_from', to='core.bed', verbose_name='From Bed')),
                ('to_bed', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transfers_to', to='core.bed', verbose_name='To Bed')),
                ('transferred_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Transferred By')),
            ],
            options={
                'verbose_name': 'Patient Transfer',
                'verbose_name_plural': 'Patient Transfers',
                'ordering': ['-transfer_date'],
            },
        ),
        migrations.CreateModel(
            name='SOAPNote',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('encounter_date', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Encounter Date & Time')),
                ('encounter_type', models.CharField(choices=[('initial', 'Initial Visit'), ('follow_up', 'Follow-up Visit'), ('urgent', 'Urgent/Walk-in'), ('emergency', 'Emergency'), ('consultation', 'Consultation'), ('telemedicine', 'Telemedicine'), ('inpatient_round', 'Inpatient Rounding'), ('discharge', 'Discharge Note')], default='follow_up', max_length=20, verbose_name='Encounter Type')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('completed', 'Completed'), ('amended', 'Amended'), ('signed', 'Signed & Locked')], default='draft', max_length=20, verbose_name='Status')),
                ('chief_complaint', models.TextField(help_text="Primary reason for the visit in patient's words", verbose_name='Chief Complaint')),
                ('history_of_present_illness', models.TextField(help_text='Detailed description of current symptoms, onset, duration, severity', verbose_name='History of Present Illness (HPI)')),
                ('symptom_onset', models.CharField(blank=True, help_text='When did symptoms begin?', max_length=100, verbose_name='Symptom Onset')),
                ('symptom_duration', models.CharField(blank=True, max_length=100, verbose_name='Symptom Duration')),
                ('symptom_severity', models.CharField(blank=True, choices=[('mild', 'Mild'), ('moderate', 'Moderate'), ('severe', 'Severe')], max_length=20, verbose_name='Symptom Severity')),
                ('aggravating_factors', models.TextField(blank=True, help_text='What makes symptoms worse?', verbose_name='Aggravating Factors')),
                ('alleviating_factors', models.TextField(blank=True, help_text='What makes symptoms better?', verbose_name='Alleviating Factors')),
                ('past_medical_history', models.TextField(blank=True, verbose_name='Past Medical History')),
                ('medications_at_home', models.TextField(blank=True, help_text='List of medications patient is currently taking', verbose_name='Current Medications')),
                ('allergies', models.TextField(blank=True, verbose_name='Allergies')),
                ('family_history', models.TextField(blank=True, verbose_name='Family History')),
                ('social_history', models.TextField(blank=True, help_text='Smoking, alcohol, occupation, living situation', verbose_name='Social History')),
                ('review_of_systems', models.TextField(blank=True, help_text='Systematic review of body systems', verbose_name='Review of Systems (ROS)')),
                ('vital_signs_summary', models.TextField(blank=True, help_text='BP, HR, RR, Temp, O2 Sat, Weight, Height', verbose_name='Vital Signs')),
                ('general_appearance', models.TextField(blank=True, help_text="Patient's overall appearance and demeanor", verbose_name='General Appearance')),
                ('physical_examination', models.TextField(help_text='Detailed findings from physical exam', verbose_name='Physical Examination Findings')),
                ('heent_exam', models.TextField(blank=True, help_text='Head, Eyes, Ears, Nose, Throat', verbose_name='HEENT Exam')),
                ('cardiovascular_exam', models.TextField(blank=True, verbose_name='Cardiovascular Exam')),
                ('respiratory_exam', models.TextField(blank=True, verbose_name='Respiratory Exam')),
                ('abdominal_exam', models.TextField(blank=True, verbose_name='Abdominal Exam')),
                ('neurological_exam', models.TextField(blank=True, verbose_name='Neurological Exam')),
                ('musculoskeletal_exam', models.TextField(blank=True, verbose_name='Musculoskeletal Exam')),
                ('skin_exam', models.TextField(blank=True, verbose_name='Skin/Integumentary Exam')),
                ('psychiatric_exam', models.TextField(blank=True, verbose_name='Psychiatric/Mental Status Exam')),
                ('lab_results', models.TextField(blank=True, help_text='Relevant lab findings', verbose_name='Laboratory Results')),
                ('imaging_results', models.TextField(blank=True, help_text='X-ray, CT, MRI, Ultrasound findings', verbose_name='Imaging Results')),
                ('other_diagnostic_results', models.TextField(blank=True, help_text='EKG, spirometry, other tests', verbose_name='Other Diagnostic Results')),
                ('primary_diagnosis', models.CharField(max_length=255, verbose_name='Primary Diagnosis')),
                ('primary_diagnosis_icd10', models.CharField(blank=True, max_length=20, verbose_name='Primary Diagnosis ICD-10 Code')),
                ('secondary_diagnoses', models.TextField(blank=True, help_text='List additional diagnoses, one per line', verbose_name='Secondary/Additional Diagnoses')),
                ('differential_diagnoses', models.TextField(blank=True, help_text='Other conditions being considered', verbose_name='Differential Diagnoses')),
                ('clinical_impression', models.TextField(blank=True, help_text='Overall assessment and reasoning', verbose_name='Clinical Impression')),
                ('prognosis', models.CharField(blank=True, choices=[('excellent', 'Excellent'), ('good', 'Good'), ('fair', 'Fair'), ('guarded', 'Guarded'), ('poor', 'Poor')], max_length=20, verbose_name='Prognosis')),
                ('treatment_plan', models.TextField(help_text='Detailed treatment plan', verbose_name='Treatment Plan')),
                ('medications_prescribed', models.TextField(blank=True, help_text='New prescriptions or changes to medications', verbose_name='Medications Prescribed')),
                ('procedures_performed', models.TextField(blank=True, help_text='Any procedures done during this visit', verbose_name='Procedures Performed')),
                ('procedures_ordered', models.TextField(blank=True, help_text='Procedures scheduled for future', verbose_name='Procedures Ordered')),
                ('labs_ordered', models.TextField(blank=True, verbose_name='Labs Ordered')),
                ('imaging_ordered', models.TextField(blank=True, verbose_name='Imaging Ordered')),
                ('referrals', models.TextField(blank=True, help_text='Specialist referrals', verbose_name='Referrals')),
                ('patient_education', models.TextField(blank=True, help_text='Education provided to patient', verbose_name='Patient Education')),
                ('lifestyle_modifications', models.TextField(blank=True, help_text='Diet, exercise, behavior changes recommended', verbose_name='Lifestyle Modifications')),
                ('follow_up_instructions', models.TextField(blank=True, verbose_name='Follow-up Instructions')),
                ('follow_up_timeframe', models.CharField(blank=True, help_text='e.g., "2 weeks", "1 month", "as needed"', max_length=50, verbose_name='Follow-up Timeframe')),
                ('return_precautions', models.TextField(blank=True, help_text='When patient should return immediately', verbose_name='Return Precautions')),
                ('time_spent_minutes', models.PositiveIntegerField(blank=True, help_text='Total time spent with patient', null=True, verbose_name='Time Spent (minutes)')),
                ('signed_at', models.DateTimeField(blank=True, null=True, verbose_name='Signed At')),
                ('amendment_notes', models.TextField(blank=True, help_text='Notes about any amendments made after signing', verbose_name='Amendment Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('admission', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='soap_notes', to='core.patientadmission', verbose_name='Related Admission')),
                ('appointment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='soap_notes', to='appointments.appointment', verbose_name='Related Appointment')),
                ('co_signed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cosigned_soap_notes', to=settings.AUTH_USER_MODEL, verbose_name='Co-signed By')),
                ('patient', models.ForeignKey(limit_choices_to={'user_type': 'patient'}, on_delete=django.db.models.deletion.CASCADE, related_name='soap_notes', to=settings.AUTH_USER_MODEL, verbose_name='Patient')),
                ('provider', models.ForeignKey(limit_choices_to={'user_type': 'doctor'}, on_delete=django.db.models.deletion.CASCADE, related_name='authored_soap_notes', to=settings.AUTH_USER_MODEL, verbose_name='Provider/Doctor')),
            ],
            options={
                'verbose_name': 'SOAP Note',
                'verbose_name_plural': 'SOAP Notes',
                'ordering': ['-encounter_date'],
            },
        ),
        migrations.CreateModel(
            name='Ward',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Ward Name')),
                ('ward_type', models.CharField(choices=[('general', 'General Ward'), ('icu', 'Intensive Care Unit (ICU)'), ('nicu', 'Neonatal ICU'), ('picu', 'Pediatric ICU'), ('ccu', 'Cardiac Care Unit'), ('emergency', 'Emergency Ward'), ('surgical', 'Surgical Ward'), ('maternity', 'Maternity Ward'), ('pediatric', 'Pediatric Ward'), ('psychiatric', 'Psychiatric Ward'), ('isolation', 'Isolation Ward'), ('burns', 'Burns Unit'), ('oncology', 'Oncology Ward'), ('orthopedic', 'Orthopedic Ward'), ('neurology', 'Neurology Ward'), ('cardiology', 'Cardiology Ward')], default='general', max_length=20, verbose_name='Ward Type')),
                ('floor', models.PositiveIntegerField(default=1, verbose_name='Floor Number')),
                ('building', models.CharField(blank=True, max_length=100, verbose_name='Building')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('head_nurse', models.ForeignKey(blank=True, limit_choices_to={'user_type__in': ['doctor', 'admin']}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_wards', to=settings.AUTH_USER_MODEL, verbose_name='Head Nurse')),
            ],
            options={
                'verbose_name': 'Ward',
                'verbose_name_plural': 'Wards',
                'ordering': ['floor', 'name'],
            },
        ),
        migrations.AddField(
            model_name='room',
            name='ward',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='rooms', to='core.ward', verbose_name='Ward'),
        ),
        migrations.AlterUniqueTogether(
            name='room',
            unique_together={('ward', 'room_number')},
        ),
    ]
